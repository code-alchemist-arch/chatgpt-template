import{S as de,i as he,s as ge,F as B,B as b,O as E,f as M,I as J,p as T,a2 as me,G as K,E as te,x as oe,b as G,H as $,J as be,ac as at,e as st,D as L,a as le,o as C,c as P,m as Z,t as R,l as Q,k as W,n as X,j as ne,q as ze,A as x,V as I,y as ce,z as _e,v as rt,a4 as ft,g as it,h as ut}from"./index.be0d597c.js";import{U as ot}from"./Upload.e673ca5f.js";import{B as He}from"./Empty.svelte_svelte_type_style_lang.734cd342.js";/* empty css                                                    */import"./ModifyUpload.svelte_svelte_type_style_lang.e946db2d.js";import{d as ct}from"./dsv.7fe76a93.js";var Ae=Object.prototype.hasOwnProperty;function ae(a,e){var t,n;if(a===e)return!0;if(a&&e&&(t=a.constructor)===e.constructor){if(t===Date)return a.getTime()===e.getTime();if(t===RegExp)return a.toString()===e.toString();if(t===Array){if((n=a.length)===e.length)for(;n--&&ae(a[n],e[n]););return n===-1}if(!t||typeof a=="object"){n=0;for(t in a)if(Ae.call(a,t)&&++n&&!Ae.call(e,t)||!(t in e)||!ae(a[t],e[t]))return!1;return Object.keys(e).length===n}}return a!==a&&e!==e}function De(a){let e,t,n;return{c(){e=B("input"),b(e,"tabindex","-1"),e.value=a[0],b(e,"class","svelte-q8uklq"),E(e,"header",a[3])},m(l,r){M(l,e,r),a[7](e),t||(n=[J(e,"keydown",a[6]),J(e,"blur",a[8])],t=!0)},p(l,r){r&1&&e.value!==l[0]&&(e.value=l[0]),r&8&&E(e,"header",l[3])},d(l){l&&T(e),a[7](null),t=!1,me(n)}}}function _t(a){let e;return{c(){e=$(a[0])},m(t,n){M(t,e,n)},p(t,n){n&1&&be(e,t[0])},d(t){t&&T(e)}}}function dt(a){let e,t;return{c(){e=new at(!1),t=st(),e.a=t},m(n,l){e.m(a[0],n,l),M(n,t,l)},p(n,l){l&1&&e.p(n[0])},d(n){n&&T(t),n&&e.d()}}}function ht(a){let e,t,n,l,r=a[2]&&De(a);function _(f,m){return f[4]==="markdown"||f[4]==="html"?dt:_t}let h=_(a),i=h(a);return{c(){r&&r.c(),e=K(),t=B("span"),i.c(),b(t,"tabindex","-1"),b(t,"role","button"),b(t,"class","svelte-q8uklq"),E(t,"edit",a[2])},m(f,m){r&&r.m(f,m),M(f,e,m),M(f,t,m),i.m(t,null),n||(l=J(t,"dblclick",a[5]),n=!0)},p(f,[m]){f[2]?r?r.p(f,m):(r=De(f),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null),h===(h=_(f))&&i?i.p(f,m):(i.d(1),i=h(f),i&&(i.c(),i.m(t,null))),m&4&&E(t,"edit",f[2])},i:te,o:te,d(f){r&&r.d(f),f&&T(e),f&&T(t),i.d(),n=!1,l()}}}function gt(a,e,t){let{edit:n}=e,{value:l=""}=e,{el:r}=e,{header:_=!1}=e,{datatype:h="str"}=e;function i(o){oe.call(this,a,o)}function f(o){oe.call(this,a,o)}function m(o){G[o?"unshift":"push"](()=>{r=o,t(1,r)})}const y=({currentTarget:o})=>{t(0,l=o.value),o.setAttribute("tabindex","-1")};return a.$$set=o=>{"edit"in o&&t(2,n=o.edit),"value"in o&&t(0,l=o.value),"el"in o&&t(1,r=o.el),"header"in o&&t(3,_=o.header),"datatype"in o&&t(4,h=o.datatype)},[l,r,n,_,h,i,f,m,y]}class Ne extends de{constructor(e){super(),he(this,e,gt,ht,ge,{edit:2,value:0,el:1,header:3,datatype:4})}}function Ee(a,e,t){const n=a.slice();return n[52]=e[t],n[54]=t,n}function Le(a,e,t){const n=a.slice();return n[55]=e[t].value,n[56]=e[t].id,n[57]=e,n[58]=t,n}function qe(a,e,t){const n=a.slice();return n[55]=e[t].value,n[56]=e[t].id,n[59]=e,n[54]=t,n}function Be(a){let e,t;return{c(){e=B("p"),t=$(a[1]),b(e,"class","svelte-1efhf8f")},m(n,l){M(n,e,l),L(e,t)},p(n,l){l[0]&2&&be(t,n[1])},d(n){n&&T(e)}}}function Me(a){let e,t;return{c(){e=B("caption"),t=$(a[1]),b(e,"class","sr-only")},m(n,l){M(n,e,l),L(e,t)},p(n,l){l[0]&2&&be(t,n[1])},d(n){n&&T(e)}}}function Te(a,e){let t,n,l,r,_,h,i,f,m,y,o,g=e[56],u,A,S;function p(z){e[30](z,e[56])}function c(){return e[31](e[56])}let q={value:e[55],edit:e[13]===e[56],header:!0};e[10][e[56]].input!==void 0&&(q.el=e[10][e[56]].input),l=new Ne({props:q}),G.push(()=>le(l,"el",p)),l.$on("keydown",e[21]),l.$on("dblclick",c);function w(){return e[32](e[54])}const F=()=>e[33](t,g),U=()=>e[33](null,g);return{key:a,first:null,c(){t=B("th"),n=B("div"),P(l.$$.fragment),_=K(),h=B("div"),i=x("svg"),f=x("path"),y=K(),b(f,"d","M4.49999 0L8.3971 6.75H0.602875L4.49999 0Z"),b(i,"width","1em"),b(i,"height","1em"),b(i,"viewBox","0 0 9 7"),b(i,"fill","none"),b(i,"xmlns","http://www.w3.org/2000/svg"),b(i,"class","svelte-1efhf8f"),b(h,"class",m="sort-button "+e[11]+" svelte-1efhf8f"),E(h,"sorted",e[12]===e[54]),E(h,"des",e[12]===e[54]&&e[11]==="des"),b(n,"class","cell-wrap svelte-1efhf8f"),b(t,"aria-sort",o=e[15](e[55],e[12],e[11])),b(t,"class","svelte-1efhf8f"),E(t,"editing",e[13]===e[56]),this.first=t},m(z,O){M(z,t,O),L(t,n),Z(l,n,null),L(n,_),L(n,h),L(h,i),L(i,f),L(t,y),F(),u=!0,A||(S=J(h,"click",w),A=!0)},p(z,O){e=z;const Y={};O[0]&256&&(Y.value=e[55]),O[0]&8448&&(Y.edit=e[13]===e[56]),!r&&O[0]&1280&&(r=!0,Y.el=e[10][e[56]].input,ne(()=>r=!1)),l.$set(Y),(!u||O[0]&2048&&m!==(m="sort-button "+e[11]+" svelte-1efhf8f"))&&b(h,"class",m),O[0]&6400&&E(h,"sorted",e[12]===e[54]),O[0]&6400&&E(h,"des",e[12]===e[54]&&e[11]==="des"),(!u||O[0]&6400&&o!==(o=e[15](e[55],e[12],e[11])))&&b(t,"aria-sort",o),g!==e[56]&&(U(),g=e[56],F()),O[0]&8448&&E(t,"editing",e[13]===e[56])},i(z){u||(C(l.$$.fragment,z),u=!0)},o(z){R(l.$$.fragment,z),u=!1},d(z){z&&T(t),Q(l),U(),A=!1,S()}}}function Ce(a,e){let t,n,l,r,_,h=e[56],i,f,m;function y(w){e[34](w,e[55],e[57],e[58])}function o(w){e[35](w,e[56])}let g={edit:e[6]===e[56],datatype:Array.isArray(e[0])?e[0][e[58]]:e[0]};e[55]!==void 0&&(g.value=e[55]),e[10][e[56]].input!==void 0&&(g.el=e[10][e[56]].input),l=new Ne({props:g}),G.push(()=>le(l,"value",y)),G.push(()=>le(l,"el",o));const u=()=>e[36](t,h),A=()=>e[36](null,h);function S(){return e[37](e[56])}function p(){return e[38](e[56])}function c(){return e[39](e[56])}function q(...w){return e[40](e[54],e[58],e[56],...w)}return{key:a,first:null,c(){t=B("td"),n=B("div"),P(l.$$.fragment),b(n,"class","cell-wrap svelte-1efhf8f"),E(n,"border-transparent",e[7]!==e[56]),b(t,"tabindex","0"),b(t,"class","svelte-1efhf8f"),this.first=t},m(w,F){M(w,t,F),L(t,n),Z(l,n,null),u(),i=!0,f||(m=[J(t,"touchstart",S,{passive:!0}),J(t,"click",p),J(t,"dblclick",c),J(t,"keydown",q)],f=!0)},p(w,F){e=w;const U={};F[0]&576&&(U.edit=e[6]===e[56]),F[0]&513&&(U.datatype=Array.isArray(e[0])?e[0][e[58]]:e[0]),!r&&F[0]&512&&(r=!0,U.value=e[55],ne(()=>r=!1)),!_&&F[0]&1536&&(_=!0,U.el=e[10][e[56]].input,ne(()=>_=!1)),l.$set(U),F[0]&640&&E(n,"border-transparent",e[7]!==e[56]),h!==e[56]&&(A(),h=e[56],u())},i(w){i||(C(l.$$.fragment,w),i=!0)},o(w){R(l.$$.fragment,w),i=!1},d(w){w&&T(t),Q(l),A(),f=!1,me(m)}}}function Fe(a,e){let t,n=[],l=new Map,r,_,h=e[52];const i=f=>f[56];for(let f=0;f<h.length;f+=1){let m=Le(e,h,f),y=i(m);l.set(y,n[f]=Ce(y,m))}return{key:a,first:null,c(){t=B("tr");for(let f=0;f<n.length;f+=1)n[f].c();r=K(),b(t,"class","svelte-1efhf8f"),this.first=t},m(f,m){M(f,t,m);for(let y=0;y<n.length;y+=1)n[y].m(t,null);L(t,r),_=!0},p(f,m){e=f,m[0]&460481&&(h=e[52],W(),n=ce(n,m,i,1,e,h,l,t,_e,Ce,r,Le),X())},i(f){if(!_){for(let m=0;m<h.length;m+=1)C(n[m]);_=!0}},o(f){for(let m=0;m<n.length;m+=1)R(n[m]);_=!1},d(f){f&&T(t);for(let m=0;m<n.length;m+=1)n[m].d()}}}function mt(a){let e,t,n,l,r=[],_=new Map,h,i,f=[],m=new Map,y,o=a[1]&&a[1].length!==0&&Me(a),g=a[8];const u=p=>p[56];for(let p=0;p<g.length;p+=1){let c=qe(a,g,p),q=u(c);_.set(q,r[p]=Te(q,c))}let A=a[9];const S=p=>p[52];for(let p=0;p<A.length;p+=1){let c=Ee(a,A,p),q=S(c);m.set(q,f[p]=Fe(q,c))}return{c(){e=B("table"),o&&o.c(),t=K(),n=B("thead"),l=B("tr");for(let p=0;p<r.length;p+=1)r[p].c();h=K(),i=B("tbody");for(let p=0;p<f.length;p+=1)f[p].c();b(l,"class","svelte-1efhf8f"),b(n,"class","svelte-1efhf8f"),b(i,"class","svelte-1efhf8f"),b(e,"class","svelte-1efhf8f"),E(e,"dragging",a[14])},m(p,c){M(p,e,c),o&&o.m(e,null),L(e,t),L(e,n),L(n,l);for(let q=0;q<r.length;q+=1)r[q].m(l,null);L(e,h),L(e,i);for(let q=0;q<f.length;q+=1)f[q].m(i,null);y=!0},p(p,c){p[1]&&p[1].length!==0?o?o.p(p,c):(o=Me(p),o.c(),o.m(e,t)):o&&(o.d(1),o=null),c[0]&3718400&&(g=p[8],W(),r=ce(r,c,u,1,p,g,_,l,_e,Te,null,qe),X()),c[0]&460481&&(A=p[9],W(),f=ce(f,c,S,1,p,A,m,i,_e,Fe,null,Ee),X()),c[0]&16384&&E(e,"dragging",p[14])},i(p){if(!y){for(let c=0;c<g.length;c+=1)C(r[c]);for(let c=0;c<A.length;c+=1)C(f[c]);y=!0}},o(p){for(let c=0;c<r.length;c+=1)R(r[c]);for(let c=0;c<f.length;c+=1)R(f[c]);y=!1},d(p){p&&T(e),o&&o.d();for(let c=0;c<r.length;c+=1)r[c].d();for(let c=0;c<f.length;c+=1)f[c].d()}}}function Oe(a){let e,t,n,l=a[3][1]==="dynamic"&&Re(a),r=a[2][1]==="dynamic"&&Se(a);return{c(){e=B("div"),l&&l.c(),t=K(),r&&r.c(),b(e,"class","controls-wrap svelte-1efhf8f")},m(_,h){M(_,e,h),l&&l.m(e,null),L(e,t),r&&r.m(e,null),n=!0},p(_,h){_[3][1]==="dynamic"?l?(l.p(_,h),h[0]&8&&C(l,1)):(l=Re(_),l.c(),C(l,1),l.m(e,t)):l&&(W(),R(l,1,1,()=>{l=null}),X()),_[2][1]==="dynamic"?r?(r.p(_,h),h[0]&4&&C(r,1)):(r=Se(_),r.c(),C(r,1),r.m(e,null)):r&&(W(),R(r,1,1,()=>{r=null}),X())},i(_){n||(C(l),C(r),n=!0)},o(_){R(l),R(r),n=!1},d(_){_&&T(e),l&&l.d(),r&&r.d()}}}function Re(a){let e,t,n;return t=new He({props:{variant:"secondary",size:"sm",$$slots:{default:[bt]},$$scope:{ctx:a}}}),t.$on("click",a[43]),{c(){e=B("span"),P(t.$$.fragment),b(e,"class","button-wrap svelte-1efhf8f")},m(l,r){M(l,e,r),Z(t,e,null),n=!0},p(l,r){const _={};r[1]&536870912&&(_.$$scope={dirty:r,ctx:l}),t.$set(_)},i(l){n||(C(t.$$.fragment,l),n=!0)},o(l){R(t.$$.fragment,l),n=!1},d(l){l&&T(e),Q(t)}}}function bt(a){let e,t,n;return{c(){e=x("svg"),t=x("path"),n=$(`
						New row`),b(t,"fill","currentColor"),b(t,"d","M24.59 16.59L17 24.17V4h-2v20.17l-7.59-7.58L6 18l10 10l10-10l-1.41-1.41z"),b(e,"xmlns","http://www.w3.org/2000/svg"),b(e,"xmlns:xlink","http://www.w3.org/1999/xlink"),b(e,"aria-hidden","true"),b(e,"role","img"),b(e,"width","1em"),b(e,"height","1em"),b(e,"preserveAspectRatio","xMidYMid meet"),b(e,"viewBox","0 0 32 32"),b(e,"class","svelte-1efhf8f")},m(l,r){M(l,e,r),L(e,t),M(l,n,r)},p:te,d(l){l&&T(e),l&&T(n)}}}function Se(a){let e,t,n;return t=new He({props:{variant:"secondary",size:"sm",$$slots:{default:[pt]},$$scope:{ctx:a}}}),t.$on("click",a[23]),{c(){e=B("span"),P(t.$$.fragment),b(e,"class","button-wrap svelte-1efhf8f")},m(l,r){M(l,e,r),Z(t,e,null),n=!0},p(l,r){const _={};r[1]&536870912&&(_.$$scope={dirty:r,ctx:l}),t.$set(_)},i(l){n||(C(t.$$.fragment,l),n=!0)},o(l){R(t.$$.fragment,l),n=!1},d(l){l&&T(e),Q(t)}}}function pt(a){let e,t,n;return{c(){e=x("svg"),t=x("path"),n=$(`
						New column`),b(t,"fill","currentColor"),b(t,"d","m18 6l-1.43 1.393L24.15 15H4v2h20.15l-7.58 7.573L18 26l10-10L18 6z"),b(e,"xmlns","http://www.w3.org/2000/svg"),b(e,"xmlns:xlink","http://www.w3.org/1999/xlink"),b(e,"aria-hidden","true"),b(e,"role","img"),b(e,"width","1em"),b(e,"height","1em"),b(e,"preserveAspectRatio","xMidYMid meet"),b(e,"viewBox","0 0 32 32"),b(e,"class","svelte-1efhf8f")},m(l,r){M(l,e,r),L(e,t),M(l,n,r)},p:te,d(l){l&&T(e),l&&T(n)}}}function wt(a){let e,t,n,l,r,_,h,i,f,m=a[1]&&a[1].length!==0&&Be(a);function y(u){a[41](u)}let o={flex:!1,center:!1,boundedheight:!1,disable_click:!0,$$slots:{default:[mt]},$$scope:{ctx:a}};a[14]!==void 0&&(o.dragging=a[14]),l=new ot({props:o}),G.push(()=>le(l,"dragging",y)),l.$on("load",a[42]);let g=a[4]&&Oe(a);return{c(){e=B("div"),m&&m.c(),t=K(),n=B("div"),P(l.$$.fragment),_=K(),g&&g.c(),b(n,"class","table-wrap scroll-hide svelte-1efhf8f"),E(n,"dragging",a[14]),E(n,"no-wrap",!a[5]),b(e,"class","svelte-1efhf8f"),E(e,"label",a[1]&&a[1].length!==0)},m(u,A){M(u,e,A),m&&m.m(e,null),L(e,t),L(e,n),Z(l,n,null),L(e,_),g&&g.m(e,null),h=!0,i||(f=[J(window,"click",a[24]),J(window,"touchstart",a[24])],i=!0)},p(u,A){u[1]&&u[1].length!==0?m?m.p(u,A):(m=Be(u),m.c(),m.m(e,t)):m&&(m.d(1),m=null);const S={};A[0]&32707|A[1]&536870912&&(S.$$scope={dirty:A,ctx:u}),!r&&A[0]&16384&&(r=!0,S.dragging=u[14],ne(()=>r=!1)),l.$set(S),A[0]&16384&&E(n,"dragging",u[14]),A[0]&32&&E(n,"no-wrap",!u[5]),u[4]?g?(g.p(u,A),A[0]&16&&C(g,1)):(g=Oe(u),g.c(),C(g,1),g.m(e,null)):g&&(W(),R(g,1,1,()=>{g=null}),X()),A[0]&2&&E(e,"label",u[1]&&u[1].length!==0)},i(u){h||(C(l.$$.fragment,u),C(g),h=!0)},o(u){R(l.$$.fragment,u),R(g),h=!1},d(u){u&&T(e),m&&m.d(),Q(l),g&&g.d(),i=!1,me(f)}}}function kt(a,e){return e.filter(t);function t(n){var l=-1;return a.split(`
`).every(r);function r(_){if(!_)return!0;var h=_.split(n).length;return l<0&&(l=h),l===h&&h>1}}}function yt(a){const e=atob(a.split(",")[1]),t=a.split(",")[0].split(":")[1].split(";")[0],n=new ArrayBuffer(e.length),l=new Uint8Array(n);for(let r=0;r<e.length;r++)l[r]=e.charCodeAt(r);return new Blob([n],{type:t})}function vt(a,e,t){let{datatype:n}=e,{label:l=null}=e,{headers:r=[]}=e,{values:_=[[]]}=e,{col_count:h}=e,{row_count:i}=e,{editable:f=!0}=e,{wrap:m=!1}=e;const y=ze();let o=!1,g=!1,u={};function A(s){let d=s||[];if(h[1]==="fixed"&&d.length<h[0]){const k=Array(h[0]-d.length).fill("").map((v,D)=>`${D+d.length}`);d=d.concat(k)}return!d||d.length===0?Array(h[0]).fill(0).map((k,v)=>{const D=`h-${v}`;return t(10,u[D]={cell:null,input:null},u),{id:D,value:JSON.stringify(v+1)}}):d.map((k,v)=>{const D=`h-${v}`;return t(10,u[D]={cell:null,input:null},u),{id:D,value:k??""}})}function S(s){const d=s.length>0?s.length:i[0];return Array(i[1]==="fixed"||d<i[0]?i[0]:d).fill(0).map((k,v)=>Array(h[1]==="fixed"?h[0]:s[0].length).fill(0).map((D,N)=>{const V=`${v}-${N}`;return t(10,u[V]={input:null,cell:null},u),{value:s?.[v]?.[N]??"",id:V}}))}let p=A(r),c;async function q(){typeof o=="string"?(await I(),u[o]?.input?.focus()):typeof g=="string"&&(await I(),u[g]?.input?.focus())}let w=[[]],F;function U(s,d,k){if(!d)return"none";if(r[d]===s){if(k==="asc")return"ascending";if(k==="des")return"descending"}}function z(s){return w.reduce((d,k,v)=>{const D=k.reduce((N,V,ie)=>s===V.id?ie:N,-1);return D===-1?d:[v,D]},[-1,-1])}async function O(s,d){if(!f||o===s)return;if(d){const[v,D]=z(s);t(9,w[v][D].value="",w)}t(6,o=s),await I();const{input:k}=u[s];k?.focus()}async function Y(s,d,k,v){let D;switch(s.key){case"ArrowRight":if(o)break;s.preventDefault(),D=w[d][k+1],t(7,g=D?D.id:g);break;case"ArrowLeft":if(o)break;s.preventDefault(),D=w[d][k-1],t(7,g=D?D.id:g);break;case"ArrowDown":if(o)break;s.preventDefault(),D=w[d+1],t(7,g=D?D[k].id:g);break;case"ArrowUp":if(o)break;s.preventDefault(),D=w[d-1],t(7,g=D?D[k].id:g);break;case"Escape":if(!f)break;s.preventDefault(),t(7,g=o),t(6,o=!1);break;case"Enter":if(!f)break;if(s.preventDefault(),s.shiftKey){re(d),await I();const[nt]=z(v);t(7,g=w[nt+1][k].id)}else o===v?t(6,o=!1):O(v);break;case"Backspace":if(!f)break;o||(s.preventDefault(),t(9,w[d][k].value="",w));break;case"Delete":if(!f)break;o||(s.preventDefault(),t(9,w[d][k].value="",w));break;case"Tab":let N=s.shiftKey?-1:1,V=w[d][k+N],ie=w?.[d+N]?.[N>0?0:p.length-1],ue=V||ie;ue&&(s.preventDefault(),t(7,g=ue?ue.id:g)),t(6,o=!1);break;default:(!o||o&&o!==v)&&s.key.length===1&&O(v,!0);break}}async function pe(s){o!==s&&g!==s&&(t(6,o=!1),t(7,g=s))}async function we(s,d){if(d==="edit"&&typeof s=="string"&&(await I(),u[s].input?.focus()),d==="edit"&&typeof s=="boolean"&&typeof g=="string"){let k=u[g]?.cell;await I(),k?.focus()}if(d==="select"&&typeof s=="string"){const{cell:k}=u[s];await I(),k?.focus()}}let j,ee;function Ue(s,d){d==="asc"?t(9,w=w.sort((k,v)=>k[s].value<v[s].value?-1:1)):d==="des"&&t(9,w=w.sort((k,v)=>k[s].value>v[s].value?-1:1))}function ke(s){typeof ee!="number"||ee!==s?(t(11,j="asc"),t(12,ee=s)):j==="asc"?t(11,j="des"):j==="des"&&t(11,j="asc"),Ue(s,j)}let H;function ye(){if(typeof g=="string"){const s=u[g].input?.value;if(p.find(d=>d.id===g)){let d=p.find(k=>k.id===g);s&&(d.value=s)}else s&&p.push({id:g,value:s})}}async function se(s,d){!f||h[1]!=="dynamic"||o===s||(t(13,H=s),await I(),u[s].input?.focus(),d&&u[s].input?.select())}function Ie(s){if(!!f)switch(s.key){case"Escape":case"Enter":case"Tab":s.preventDefault(),t(7,g=H),t(13,H=!1),ye();break}}function re(s){i[1]==="dynamic"&&(w.splice(s?s+1:w.length,0,Array(w[0].length).fill(0).map((d,k)=>{const v=`${w.length}-${k}`;return t(10,u[v]={cell:null,input:null},u),{id:v,value:""}})),t(9,w),t(27,_),t(29,F),t(26,r))}async function Je(){if(h[1]!=="dynamic")return;for(let d=0;d<w.length;d++){const k=`${d}-${w[d].length}`;t(10,u[k]={cell:null,input:null},u),w[d].push({id:k,value:""})}const s=`h-${p.length}`;t(10,u[s]={cell:null,input:null},u),p.push({id:s,value:`Header ${p.length+1}`}),t(9,w),t(27,_),t(29,F),t(26,r),t(8,p),t(26,r),t(28,c),t(27,_),await I(),se(s,!0)}function Ke(s){typeof o=="string"&&u[o]&&u[o].cell!==s.target&&!u[o].cell?.contains(s?.target)&&t(6,o=!1),typeof H=="string"&&u[H]&&u[H].cell!==s.target&&!u[H].cell?.contains(s.target)&&(t(7,g=H),t(13,H=!1),ye(),t(13,H=!1))}function ve(s){const d=new FileReader;function k(v){if(!v?.target?.result||typeof v.target.result!="string")return;const[D]=kt(v.target.result,[",","	"]),[N,...V]=ct(D).parseRows(v.target.result);t(8,p=A(h[1]==="fixed"?N.slice(0,h[0]):N)),t(27,_=V),d.removeEventListener("loadend",k)}d.addEventListener("loadend",k),d.readAsText(s)}let fe=!1;function Ve(s,d){a.$$.not_equal(u[d].input,s)&&(u[d].input=s,t(10,u))}const Ye=s=>se(s),je=s=>ke(s);function Ge(s,d){G[s?"unshift":"push"](()=>{u[d].cell=s,t(10,u)})}function Pe(s,d,k,v){k[v].value=s,t(9,w),t(27,_),t(29,F),t(26,r)}function Ze(s,d){a.$$.not_equal(u[d].input,s)&&(u[d].input=s,t(10,u))}function Qe(s,d){G[s?"unshift":"push"](()=>{u[d].cell=s,t(10,u)})}const We=s=>O(s),Xe=s=>pe(s),xe=s=>O(s),$e=(s,d,k,v)=>Y(v,s,d,k);function et(s){fe=s,t(14,fe)}const tt=s=>ve(yt(s.detail.data)),lt=()=>re();return a.$$set=s=>{"datatype"in s&&t(0,n=s.datatype),"label"in s&&t(1,l=s.label),"headers"in s&&t(26,r=s.headers),"values"in s&&t(27,_=s.values),"col_count"in s&&t(2,h=s.col_count),"row_count"in s&&t(3,i=s.row_count),"editable"in s&&t(4,f=s.editable),"wrap"in s&&t(5,m=s.wrap)},a.$$.update=()=>{if(a.$$.dirty[0]&201326592&&(_&&!Array.isArray(_)?(t(26,r=_.headers),t(27,_=_.data.length===0?[Array(r.length).fill("")]:_.data)):_===null?t(27,_=[Array(r.length).fill("")]):(t(27,_),t(26,r))),a.$$.dirty[0]&671088640&&(ae(_,F)||(t(9,w=S(_)),t(29,F=_),q())),a.$$.dirty[0]&640&&g!==!1){const s=g.split("-"),d=parseInt(s[0]),k=parseInt(s[1]);y("select",{index:[d,k],value:w[d][k].value})}a.$$.dirty[0]&335544320&&(ae(r,c)||(t(8,p=A(r)),t(28,c=r),q())),a.$$.dirty[0]&768&&p&&y("change",{data:w.map(s=>s.map(({value:d})=>d)),headers:p.map(s=>s.value)}),a.$$.dirty[0]&64&&we(o,"edit"),a.$$.dirty[0]&128&&we(g,"select")},[n,l,h,i,f,m,o,g,p,w,u,j,ee,H,fe,U,O,Y,pe,ke,se,Ie,re,Je,Ke,ve,r,_,c,F,Ve,Ye,je,Ge,Pe,Ze,Qe,We,Xe,xe,$e,et,tt,lt]}class At extends de{constructor(e){super(),he(this,e,vt,wt,ge,{datatype:0,label:1,headers:26,values:27,col_count:2,row_count:3,editable:4,wrap:5},null,[-1,-1])}}function Dt(a){let e,t,n,l,r;const _=[a[10]];let h={};for(let i=0;i<_.length;i+=1)h=rt(h,_[i]);return t=new ft({props:h}),l=new At({props:{label:a[7],row_count:a[6],col_count:a[5],values:a[0],headers:a[1],editable:a[4]==="dynamic",wrap:a[8],datatype:a[9]}}),l.$on("change",a[12]),l.$on("select",a[13]),{c(){e=B("div"),P(t.$$.fragment),n=K(),P(l.$$.fragment),b(e,"id",a[2]),b(e,"class","relative overflow-hidden svelte-1nw9bhs"),E(e,"hide",!a[3])},m(i,f){M(i,e,f),Z(t,e,null),L(e,n),Z(l,e,null),r=!0},p(i,[f]){const m=f&1024?it(_,[ut(i[10])]):{};t.$set(m);const y={};f&128&&(y.label=i[7]),f&64&&(y.row_count=i[6]),f&32&&(y.col_count=i[5]),f&1&&(y.values=i[0]),f&2&&(y.headers=i[1]),f&16&&(y.editable=i[4]==="dynamic"),f&256&&(y.wrap=i[8]),f&512&&(y.datatype=i[9]),l.$set(y),(!r||f&4)&&b(e,"id",i[2]),f&8&&E(e,"hide",!i[3])},i(i){r||(C(t.$$.fragment,i),C(l.$$.fragment,i),r=!0)},o(i){R(t.$$.fragment,i),R(l.$$.fragment,i),r=!1},d(i){i&&T(e),Q(t),Q(l)}}}function Et(a,e,t){let{headers:n=[]}=e,{elem_id:l=""}=e,{visible:r=!0}=e,{value:_={data:[["","",""]],headers:["1","2","3"]}}=e,{mode:h}=e,{col_count:i}=e,{row_count:f}=e,{label:m=null}=e,{wrap:y}=e,{datatype:o}=e;const g=ze();let{loading_status:u}=e;async function A(c){t(0,_=c),await I(),g("change",c)}const S=({detail:c})=>A(c);function p(c){oe.call(this,a,c)}return a.$$set=c=>{"headers"in c&&t(1,n=c.headers),"elem_id"in c&&t(2,l=c.elem_id),"visible"in c&&t(3,r=c.visible),"value"in c&&t(0,_=c.value),"mode"in c&&t(4,h=c.mode),"col_count"in c&&t(5,i=c.col_count),"row_count"in c&&t(6,f=c.row_count),"label"in c&&t(7,m=c.label),"wrap"in c&&t(8,y=c.wrap),"datatype"in c&&t(9,o=c.datatype),"loading_status"in c&&t(10,u=c.loading_status)},[_,n,l,r,h,i,f,m,y,o,u,A,S,p]}class Lt extends de{constructor(e){super(),he(this,e,Et,Dt,ge,{headers:1,elem_id:2,visible:3,value:0,mode:4,col_count:5,row_count:6,label:7,wrap:8,datatype:9,loading_status:10})}}var Ot=Lt;const Rt=["static","dynamic"],St=a=>({type:{payload:"{ data: Array<Array<string | number>>; headers: Array<string> }"},description:{payload:"an object with an array of data and an array of headers"},example_data:a.value});export{Ot as Component,St as document,Rt as modes};
//# sourceMappingURL=index.53547df3.js.map
