import{S as x,i as ee,s as G,A as Q,B as d,f as y,D as O,E as F,p as v,a3 as It,F as L,K as H,q as me,b as D,ad as Xe,ae as Ke,af as $e,C as Ct,O as U,I as J,a9 as yt,a2 as bt,G as R,ai as pt,o as w,k as Z,t as A,n as K,N as vt,r as kt,V as ge,a8 as zt,x as ce,c as T,m as B,l as j,M as Le,al as Mt,e as ae,j as V,a as X,W as Tt,X as Bt,Y as jt,Z as St,v as Dt,a4 as Et,g as Rt,h as Lt}from"./index.be0d597c.js";import{a as Ut}from"./Empty.svelte_svelte_type_style_lang.734cd342.js";import{B as wt}from"./BlockLabel.0ec0eaf2.js";/* empty css                                                    */import{I as Ue}from"./Image.188c809d.js";import{C as qt,i as Nt,U as Ft,W as Wt}from"./StaticImage.svelte_svelte_type_style_lang.37225865.js";import{I as ke,C as Ot,M as qe}from"./ModifyUpload.522a1db4.js";import{U as Ht}from"./Upload.e673ca5f.js";import{E as Yt}from"./Empty.1026dd4f.js";import{D as Jt}from"./Download.80fe2532.js";import"./Blocks.24432273.js";import{U as Pt}from"./UploadText.48b8722b.js";import{E as nr}from"./Image.9c10e615.js";import"./ModifyUpload.svelte_svelte_type_style_lang.e946db2d.js";function Vt(t){let e,n,r;return{c(){e=Q("svg"),n=Q("path"),r=Q("path"),d(n,"d","M28.828 3.172a4.094 4.094 0 0 0-5.656 0L4.05 22.292A6.954 6.954 0 0 0 2 27.242V30h2.756a6.952 6.952 0 0 0 4.95-2.05L28.828 8.829a3.999 3.999 0 0 0 0-5.657zM10.91 18.26l2.829 2.829l-2.122 2.121l-2.828-2.828zm-2.619 8.276A4.966 4.966 0 0 1 4.756 28H4v-.759a4.967 4.967 0 0 1 1.464-3.535l1.91-1.91l2.829 2.828zM27.415 7.414l-12.261 12.26l-2.829-2.828l12.262-12.26a2.047 2.047 0 0 1 2.828 0a2 2 0 0 1 0 2.828z"),d(n,"fill","currentColor"),d(r,"d","M6.5 15a3.5 3.5 0 0 1-2.475-5.974l3.5-3.5a1.502 1.502 0 0 0 0-2.121a1.537 1.537 0 0 0-2.121 0L3.415 5.394L2 3.98l1.99-1.988a3.585 3.585 0 0 1 4.95 0a3.504 3.504 0 0 1 0 4.949L5.439 10.44a1.502 1.502 0 0 0 0 2.121a1.537 1.537 0 0 0 2.122 0l4.024-4.024L13 9.95l-4.025 4.024A3.475 3.475 0 0 1 6.5 15z"),d(r,"fill","currentColor"),d(e,"width","100%"),d(e,"height","100%"),d(e,"viewBox","0 0 32 32")},m(s,u){y(s,e,u),O(e,n),O(e,r)},p:F,i:F,o:F,d(s){s&&v(e)}}}class Xt extends x{constructor(e){super(),ee(this,e,null,Vt,G,{})}}function Qt(t){let e,n,r,s,u,i,o;return{c(){e=Q("svg"),n=Q("circle"),r=Q("circle"),s=Q("circle"),u=Q("circle"),i=Q("circle"),o=Q("path"),d(n,"cx","10"),d(n,"cy","12"),d(n,"r","2"),d(n,"fill","currentColor"),d(r,"cx","16"),d(r,"cy","9"),d(r,"r","2"),d(r,"fill","currentColor"),d(s,"cx","22"),d(s,"cy","12"),d(s,"r","2"),d(s,"fill","currentColor"),d(u,"cx","23"),d(u,"cy","18"),d(u,"r","2"),d(u,"fill","currentColor"),d(i,"cx","19"),d(i,"cy","23"),d(i,"r","2"),d(i,"fill","currentColor"),d(o,"fill","currentColor"),d(o,"d","M16.54 2A14 14 0 0 0 2 16a4.82 4.82 0 0 0 6.09 4.65l1.12-.31a3 3 0 0 1 3.79 2.9V27a3 3 0 0 0 3 3a14 14 0 0 0 14-14.54A14.05 14.05 0 0 0 16.54 2Zm8.11 22.31A11.93 11.93 0 0 1 16 28a1 1 0 0 1-1-1v-3.76a5 5 0 0 0-5-5a5.07 5.07 0 0 0-1.33.18l-1.12.31A2.82 2.82 0 0 1 4 16A12 12 0 0 1 16.47 4A12.18 12.18 0 0 1 28 15.53a11.89 11.89 0 0 1-3.35 8.79Z"),d(e,"width","100%"),d(e,"height","100%"),d(e,"viewBox","0 0 32 32")},m(l,h){y(l,e,h),O(e,n),O(e,r),O(e,s),O(e,u),O(e,i),O(e,o)},p:F,i:F,o:F,d(l){l&&v(e)}}}class Gt extends x{constructor(e){super(),ee(this,e,null,Qt,G,{})}}function Zt(t){let e,n;return{c(){e=Q("svg"),n=Q("path"),d(n,"d","M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"),d(e,"xmlns","http://www.w3.org/2000/svg"),d(e,"width","100%"),d(e,"height","100%"),d(e,"viewBox","0 0 24 24"),d(e,"fill","none"),d(e,"stroke","currentColor"),d(e,"stroke-width","1.5"),d(e,"stroke-linecap","round"),d(e,"stroke-linejoin","round"),d(e,"class","feather feather-edit-2")},m(r,s){y(r,e,s),O(e,n)},p:F,i:F,o:F,d(r){r&&v(e)}}}class xe extends x{constructor(e){super(),ee(this,e,null,Zt,G,{})}}function Kt(t){let e,n;return{c(){e=L("img"),H(e.src,n=t[0])||d(e,"src",n),d(e,"alt","")},m(r,s){y(r,e,s),t[4](e)},p(r,[s]){s&1&&!H(e.src,n=r[0])&&d(e,"src",n)},i:F,o:F,d(r){r&&v(e),t[4](null)}}}function $t(t,e,n){let{image:r}=e,s;const u=me();let i;function o(){i.destroy()}function l(){i&&o(),i=new qt(s,{autoCropArea:1,cropend(){const f=i.getCroppedCanvas().toDataURL();u("crop",f)}}),u("crop",r)}function h(f){D[f?"unshift":"push"](()=>{s=f,n(1,s)})}return t.$$set=f=>{"image"in f&&n(0,r=f.image)},[r,s,o,l,h]}class At extends x{constructor(e){super(),ee(this,e,$t,Kt,G,{image:0,destroy:2,create:3})}get image(){return this.$$.ctx[0]}set image(e){this.$$set({image:e}),It()}get destroy(){return this.$$.ctx[2]}get create(){return this.$$.ctx[3]}}class et{constructor(e,n){this.x=e,this.y=n}}class tt extends et{update(e){this.x=e.x,this.y=e.y}moveByAngle(e,n){const r=e+Math.PI/2;this.x=this.x+Math.sin(r)*n,this.y=this.y-Math.cos(r)*n}equalsTo(e){return this.x===e.x&&this.y===e.y}getDifferenceTo(e){return new et(this.x-e.x,this.y-e.y)}getDistanceTo(e){const n=this.getDifferenceTo(e);return Math.sqrt(Math.pow(n.x,2)+Math.pow(n.y,2))}getAngleTo(e){const n=this.getDifferenceTo(e);return Math.atan2(n.y,n.x)}toObject(){return{x:this.x,y:this.y}}}const xt=30;class en{constructor({radius:e=xt,enabled:n=!0,initialPoint:r={x:0,y:0}}={}){this.radius=e,this._isEnabled=n,this.pointer=new tt(r.x,r.y),this.brush=new tt(r.x,r.y),this.angle=0,this.distance=0,this._hasMoved=!1}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}isEnabled(){return this._isEnabled}setRadius(e){this.radius=e}getRadius(){return this.radius}getBrushCoordinates(){return this.brush.toObject()}getPointerCoordinates(){return this.pointer.toObject()}getBrush(){return this.brush}getPointer(){return this.pointer}getAngle(){return this.angle}getDistance(){return this.distance}brushHasMoved(){return this._hasMoved}update(e,{both:n=!1}={}){return this._hasMoved=!1,this.pointer.equalsTo(e)&&!n?!1:(this.pointer.update(e),n?(this._hasMoved=!0,this.brush.update(e),!0):(this._isEnabled?(this.distance=this.pointer.getDistanceTo(this.brush),this.angle=this.pointer.getAngleTo(this.brush),this.distance>this.radius&&(this.brush.moveByAngle(this.angle,this.distance-this.radius),this._hasMoved=!0)):(this.distance=0,this.angle=0,this.brush.update(e),this._hasMoved=!0),!0))}}function nt(t,e,n){const r=t.slice();return r[59]=e[n].name,r[60]=e[n].zIndex,r[61]=e,r[62]=n,r}function rt(t){let e,n,r;return{c(){e=L("div"),e.textContent="Start drawing",d(e,"class","start-prompt svelte-1jm7j0h")},m(s,u){y(s,e,u),r=!0},i(s){r||(Xe(()=>{n||(n=Ke(e,$e,{duration:50},!0)),n.run(1)}),r=!0)},o(s){n||(n=Ke(e,$e,{duration:50},!1)),n.run(0),r=!1},d(s){s&&v(e),s&&n&&n.end()}}}function it(t){let e,n,r=t[59],s,u;const i=()=>t[29](e,r),o=()=>t[29](null,r);return{c(){e=L("canvas"),d(e,"key",n=t[59]),Ct(e,"z-index",t[60]),d(e,"class","svelte-1jm7j0h"),U(e,"lr",t[5]),U(e,"tb",!t[5])},m(l,h){y(l,e,h),i(),s||(u=[J(e,"mousedown",t[59]==="interface"?t[7]:void 0),J(e,"mousemove",t[59]==="interface"?t[8]:void 0),J(e,"mouseup",t[59]==="interface"?t[9]:void 0),J(e,"mouseout",t[59]==="interface"?t[9]:void 0),J(e,"blur",t[59]==="interface"?t[9]:void 0),J(e,"touchstart",t[59]==="interface"?t[7]:void 0),J(e,"touchmove",t[59]==="interface"?t[8]:void 0),J(e,"touchend",t[59]==="interface"?t[9]:void 0),J(e,"touchcancel",t[59]==="interface"?t[9]:void 0),J(e,"click",yt(t[28]))],s=!0)},p(l,h){t=l,r!==t[59]&&(o(),r=t[59],i()),h[0]&32&&U(e,"lr",t[5]),h[0]&32&&U(e,"tb",!t[5])},d(l){l&&v(e),o(),s=!1,bt(u)}}}function tn(t){let e,n,r,s,u=t[4]===0&&rt(),i=t[6],o=[];for(let l=0;l<i.length;l+=1)o[l]=it(nt(t,i,l));return{c(){e=L("div"),u&&u.c(),n=R();for(let l=0;l<o.length;l+=1)o[l].c();d(e,"class","wrap svelte-1jm7j0h"),Xe(()=>t[31].call(e))},m(l,h){y(l,e,h),u&&u.m(e,null),O(e,n);for(let f=0;f<o.length;f+=1)o[f].m(e,null);t[30](e),r=pt(e,t[31].bind(e)),s=!0},p(l,h){if(l[4]===0?u?h[0]&16&&w(u,1):(u=rt(),u.c(),w(u,1),u.m(e,n)):u&&(Z(),A(u,1,1,()=>{u=null}),K()),h[0]&993){i=l[6];let f;for(f=0;f<i.length;f+=1){const g=nt(l,i,f);o[f]?o[f].p(g,h):(o[f]=it(g),o[f].c(),o[f].m(e,null))}for(;f<o.length;f+=1)o[f].d(1);o.length=i.length}},i(l){s||(w(u),s=!0)},o(l){A(u),s=!1},d(l){l&&v(e),u&&u.d(),vt(o,l),t[30](null),r()}}}let nn="#aaa";function st(t,e){return{x:t.x+(e.x-t.x)/2,y:t.y+(e.y-t.y)/2}}function rn(t,e,n){let r;const s=me();let{value:u}=e,{value_img:i}=e,{mode:o="sketch"}=e,{brush_color:l="#0b0f19"}=e,{brush_radius:h}=e,{source:f}=e,{width:g=400}=e,{height:a=200}=e,{container_height:_=200}=e,{shape:b}=e,I,z=g,q=a,ie;const se=[{name:"interface",zIndex:15},{name:"drawing",zIndex:11},{name:"temp",zIndex:12},{name:"mask",zIndex:-1},{name:"temp_fake",zIndex:-2}];let S={},p={},N=[],W=[],le=!0,te=!0,ne=!1,re=!1,k=null,P=null,fe=null,ue=0;function $(){if(!b){p.temp.drawImage(i,0,0,g,a);return}let m=i.naturalWidth,C=i.naturalHeight;const c=b[0]/b[1],M=m/C;let E=0,Y=0;c<M?(m=b[1]*M,C=b[1],E=(b[0]-m)/2):c>M?(m=b[0],C=b[0]/M,Y=(b[1]-C)/2):(E=0,Y=0,m=b[0],C=b[1]),p.temp.drawImage(i,E,Y,m,C)}kt(async()=>{Object.keys(S).forEach(m=>{n(25,p[m]=S[m].getContext("2d"),p)}),await ge(),i&&(i.addEventListener("load",m=>{f==="webcam"?(p.temp.save(),p.temp.translate(g,0),p.temp.scale(-1,1),p.temp.drawImage(i,0,0),p.temp.restore()):$(),p.drawing.drawImage(S.temp,0,0,g,a),oe()}),setTimeout(()=>{f==="webcam"?(p.temp.save(),p.temp.translate(g,0),p.temp.scale(-1,1),p.temp.drawImage(i,0,0),p.temp.restore()):$(),p.drawing.drawImage(S.temp,0,0,g,a),de({lines:W.slice()}),oe()},100)),n(27,k=new en({radius:h*.05,enabled:!0,initialPoint:{x:g/2,y:a/2}})),fe=new Nt((m,C,...c)=>{ze(m,C)}),fe.observe(P),be(),n(23,I=!0),requestAnimationFrame(()=>{we(),requestAnimationFrame(()=>{he()})})});function we(){const m=g/2,C=a/2;k.update({x:m,y:C},{both:!0}),k.update({x:m,y:C},{both:!1}),le=!0,te=!0}zt(()=>{n(23,I=!1),fe.unobserve(P)});function Ne(){const m=W.slice(0,-1);Ee(),i&&(f==="webcam"?(p.temp.save(),p.temp.translate(g,0),p.temp.scale(-1,1),p.temp.drawImage(i,0,0),p.temp.restore()):$(),(!W||!W.length)&&p.drawing.drawImage(S.temp,0,0,g,a)),de({lines:m}),n(4,ue=m.length),W.length&&n(26,W=m),W.length==0&&s("clear"),oe()}let de=({lines:m})=>{m.forEach(C=>{const{points:c,brush_color:M,brush_radius:E}=C;Be({points:c,brush_color:M,brush_radius:E}),o==="mask"&&je({points:c,brush_color:M,brush_radius:E}),N=c}),De({brush_color:l,brush_radius:h}),o==="mask"&&Se()},Fe=m=>{m.preventDefault(),re=!0;const{x:C,y:c}=Me(m);m.touches&&m.touches.length>0&&k.update({x:C,y:c},{both:!0}),Te(C,c),n(4,ue+=1)},Ae=m=>{m.preventDefault();const{x:C,y:c}=Me(m);Te(C,c)},We=m=>{m.preventDefault(),Ae(m),ne=!1,re=!1,De(),o==="mask"&&Se()},Ie=0,Ce=0,ye=0,ve=!1,ze=async()=>{if(b&&P){const c=P?.getBoundingClientRect(),M=b[0]/b[1],E=c.width/c.height;n(5,ve=M<E)}if(g===Ie&&a===Ce&&ye===_)return;const m={width:g,height:a},C={height:_,width:_*(m.width/m.height)};await Promise.all([_e(S.interface,m,C),_e(S.drawing,m,C),_e(S.temp,m,C),_e(S.temp_fake,m,C),_e(S.mask,m,C,!1)]),h||n(10,h=20*(m.width/C.width)),be({once:!0}),setTimeout(()=>{Ce=a,Ie=g,ye=_},10),await ge(),he()},_e=async(m,C,c,M=!0)=>{if(!I)return;await ge();const E=window.devicePixelRatio||1;m.width=C.width*(M?E:1),m.height=C.height*(M?E:1);const Y=m.getContext("2d");M&&Y.scale(E,E),m.style.width=`${c.width}px`,m.style.height=`${c.height}px`},Me=m=>{const C=S.interface.getBoundingClientRect();let c=m.clientX,M=m.clientY;return m.changedTouches&&m.changedTouches.length>0&&(c=m.changedTouches[0].clientX,M=m.changedTouches[0].clientY),{x:(c-C.left)/C.width*g,y:(M-C.top)/C.height*a}},Te=(m,C)=>{k.update({x:m,y:C});const c=!k.isEnabled();(re&&!ne||c&&re)&&(ne=!0,N.push(k.brush.toObject())),ne&&(N.push(k.brush.toObject()),Be({points:N,brush_color:l,brush_radius:h}),o==="mask"&&je({points:N,brush_color:l,brush_radius:h})),le=!0},Be=({points:m,brush_color:C,brush_radius:c})=>{if(!m||m.length<2||(n(25,p.temp.lineJoin="round",p),n(25,p.temp.lineCap="round",p),n(25,p.temp.strokeStyle=C,p),n(25,p.temp.lineWidth=c,p),!m||m.length<2))return;let M=m[0],E=m[1];p.temp.moveTo(E.x,E.y),p.temp.beginPath();for(var Y=1,Ve=m.length;Y<Ve;Y++){var pe=st(M,E);p.temp.quadraticCurveTo(M.x,M.y,pe.x,pe.y),M=m[Y],E=m[Y+1]}p.temp.lineTo(M.x,M.y),p.temp.stroke()},je=({points:m,brush_color:C,brush_radius:c})=>{if(!m||m.length<2)return;n(25,p.temp_fake.lineJoin="round",p),n(25,p.temp_fake.lineCap="round",p),n(25,p.temp_fake.strokeStyle="#fff",p),n(25,p.temp_fake.lineWidth=c,p);let M=m[0],E=m[1];p.temp_fake.moveTo(E.x,E.y),p.temp_fake.beginPath();for(var Y=1,Ve=m.length;Y<Ve;Y++){var pe=st(M,E);p.temp_fake.quadraticCurveTo(M.x,M.y,pe.x,pe.y),M=m[Y],E=m[Y+1]}p.temp_fake.lineTo(M.x,M.y),p.temp_fake.stroke()},Se=()=>{N.length<1||(N.length=0,p.mask.drawImage(S.temp_fake,0,0,g,a),oe())},De=()=>{N.length<1||(W.push({points:N.slice(),brush_color:l,brush_radius:h}),o!=="mask"&&(N.length=0),p.drawing.drawImage(S.temp,0,0,g,a),oe())},oe=()=>{const m=Re();s("change",m)};function he(){return n(26,W=[]),Ee(),n(4,ue=0),!0}function Ee(){te=!0,p.temp.clearRect(0,0,g,a),n(25,p.temp.fillStyle=o==="mask"?"transparent":"#FFFFFF",p),p.temp.fillRect(0,0,g,a),o==="mask"&&(p.temp_fake.clearRect(0,0,S.temp_fake.width,S.temp_fake.height),p.mask.clearRect(0,0,g,a),n(25,p.mask.fillStyle="#000",p),p.mask.fillRect(0,0,g,a))}let be=({once:m=!1}={})=>{if(le||te){const C=k.getPointerCoordinates(),c=k.getBrushCoordinates();Oe(p.interface,C,c),le=!1,te=!1}m||window.requestAnimationFrame(()=>{be()})},Oe=(m,C,c)=>{m.clearRect(0,0,g,a),m.beginPath(),m.fillStyle=l,m.arc(c.x,c.y,h/2,0,Math.PI*2,!0),m.fill(),m.beginPath(),m.fillStyle=nn,m.arc(c.x,c.y,r,0,Math.PI*2,!0),m.fill()};function Re(){return o==="mask"?S.mask.toDataURL("image/jpg"):S.drawing.toDataURL("image/jpg")}function He(m){ce.call(this,t,m)}function Ye(m,C){D[m?"unshift":"push"](()=>{S[C]=m,n(0,S)})}function Je(m){D[m?"unshift":"push"](()=>{P=m,n(3,P)})}function Pe(){z=this.offsetWidth,q=this.offsetHeight,n(1,z),n(2,q)}return t.$$set=m=>{"value"in m&&n(13,u=m.value),"value_img"in m&&n(14,i=m.value_img),"mode"in m&&n(15,o=m.mode),"brush_color"in m&&n(16,l=m.brush_color),"brush_radius"in m&&n(10,h=m.brush_radius),"source"in m&&n(17,f=m.source),"width"in m&&n(11,g=m.width),"height"in m&&n(12,a=m.height),"container_height"in m&&n(18,_=m.container_height),"shape"in m&&n(19,b=m.shape)},t.$$.update=()=>{t.$$.dirty[0]&530432&&b&&(g||a)&&(n(11,g=b[0]),n(12,a=b[1])),t.$$.dirty[0]&8396800&&I&&!u&&he(),t.$$.dirty[0]&125982721&&I&&i!==ie&&(n(24,ie=i),he(),setTimeout(()=>{f==="webcam"?(p.temp.save(),p.temp.translate(g,0),p.temp.scale(-1,1),p.temp.drawImage(i,0,0),p.temp.restore()):$(),p.drawing.drawImage(S.temp,0,0,g,a),de({lines:W.slice()}),oe()},50)),t.$$.dirty[0]&134218752&&k&&(we(),k.setRadius(h*.05)),t.$$.dirty[0]&6144&&(g||a)&&ze(),t.$$.dirty[0]&1024&&(r=h*.075)},[S,z,q,P,ue,ve,se,Fe,Ae,We,h,g,a,u,i,o,l,f,_,b,Ne,he,Re,I,ie,p,W,k,He,Ye,Je,Pe]}class Qe extends x{constructor(e){super(),ee(this,e,rn,tn,G,{value:13,value_img:14,mode:15,brush_color:16,brush_radius:10,source:17,width:11,height:12,container_height:18,shape:19,undo:20,clear:21,get_image_data:22},null,[-1,-1,-1])}get undo(){return this.$$.ctx[20]}get clear(){return this.$$.ctx[21]}get get_image_data(){return this.$$.ctx[22]}}function sn(t){let e,n,r,s,u;return n=new ke({props:{Icon:Ft,label:"Undo"}}),n.$on("click",t[1]),s=new ke({props:{Icon:Ot,label:"Clear"}}),s.$on("click",t[2]),{c(){e=L("div"),T(n.$$.fragment),r=R(),T(s.$$.fragment),d(e,"class","svelte-s6ybro")},m(i,o){y(i,e,o),B(n,e,null),O(e,r),B(s,e,null),u=!0},p:F,i(i){u||(w(n.$$.fragment,i),w(s.$$.fragment,i),u=!0)},o(i){A(n.$$.fragment,i),A(s.$$.fragment,i),u=!1},d(i){i&&v(e),j(n),j(s)}}}function ln(t){const e=me();return[e,()=>e("undo"),s=>{e("clear"),s.stopPropagation()}]}class Ge extends x{constructor(e){super(),ee(this,e,ln,sn,G,{})}}function lt(t){let e,n,r,s,u;return{c(){e=L("input"),d(e,"aria-label","Brush radius"),d(e,"type","range"),d(e,"min",n=.5*(t[2]/t[6])),d(e,"max",r=75*(t[2]/t[6])),d(e,"class","svelte-p4aq0j")},m(i,o){y(i,e,o),Le(e,t[0]),s||(u=[J(e,"change",t[10]),J(e,"input",t[10])],s=!0)},p(i,o){o&68&&n!==(n=.5*(i[2]/i[6]))&&d(e,"min",n),o&68&&r!==(r=75*(i[2]/i[6]))&&d(e,"max",r),o&1&&Le(e,i[0])},d(i){i&&v(e),s=!1,bt(u)}}}function ut(t){let e,n,r,s;n=new ke({props:{Icon:Gt,label:"Select brush color"}}),n.$on("click",t[11]);let u=t[5]&&ot(t);return{c(){e=L("span"),T(n.$$.fragment),r=R(),u&&u.c(),d(e,"class","col svelte-p4aq0j")},m(i,o){y(i,e,o),B(n,e,null),O(e,r),u&&u.m(e,null),s=!0},p(i,o){i[5]?u?u.p(i,o):(u=ot(i),u.c(),u.m(e,null)):u&&(u.d(1),u=null)},i(i){s||(w(n.$$.fragment,i),s=!0)},o(i){A(n.$$.fragment,i),s=!1},d(i){i&&v(e),j(n),u&&u.d()}}}function ot(t){let e,n,r;return{c(){e=L("input"),d(e,"aria-label","Brush color"),d(e,"type","color"),d(e,"class","svelte-p4aq0j")},m(s,u){y(s,e,u),Le(e,t[1]),n||(r=J(e,"input",t[12]),n=!0)},p(s,u){u&2&&Le(e,s[1])},d(s){s&&v(e),n=!1,r()}}}function un(t){let e,n,r,s,u,i;r=new ke({props:{Icon:Xt,label:"Use brush"}}),r.$on("click",t[9]);let o=t[4]&&lt(t),l=t[3]!=="mask"&&ut(t);return{c(){e=L("div"),n=L("span"),T(r.$$.fragment),s=R(),o&&o.c(),u=R(),l&&l.c(),d(n,"class","brush svelte-p4aq0j"),d(e,"class","wrap svelte-p4aq0j")},m(h,f){y(h,e,f),O(e,n),B(r,n,null),O(n,s),o&&o.m(n,null),O(e,u),l&&l.m(e,null),i=!0},p(h,[f]){h[4]?o?o.p(h,f):(o=lt(h),o.c(),o.m(n,null)):o&&(o.d(1),o=null),h[3]!=="mask"?l?(l.p(h,f),f&8&&w(l,1)):(l=ut(h),l.c(),w(l,1),l.m(e,null)):l&&(Z(),A(l,1,1,()=>{l=null}),K())},i(h){i||(w(r.$$.fragment,h),w(l),i=!0)},o(h){A(r.$$.fragment,h),A(l),i=!1},d(h){h&&v(e),j(r),o&&o.d(),l&&l.d()}}}function on(t,e,n){let r;me();let s=!1,u=!1,{brush_radius:i=20}=e,{brush_color:o="#000"}=e,{container_height:l}=e,{img_width:h}=e,{img_height:f}=e,{mode:g="other"}=e;const a=()=>n(4,s=!s);function _(){i=Mt(this.value),n(0,i)}const b=()=>n(5,u=!u);function I(){o=this.value,n(1,o)}return t.$$set=z=>{"brush_radius"in z&&n(0,i=z.brush_radius),"brush_color"in z&&n(1,o=z.brush_color),"container_height"in z&&n(7,l=z.container_height),"img_width"in z&&n(2,h=z.img_width),"img_height"in z&&n(8,f=z.img_height),"mode"in z&&n(3,g=z.mode)},t.$$.update=()=>{t.$$.dirty&388&&n(6,r=l*(h/f))},[i,o,h,g,s,u,r,l,f,a,_,b,I]}class Ze extends x{constructor(e){super(),ee(this,e,on,un,G,{brush_radius:0,brush_color:1,container_height:7,img_width:2,img_height:8,mode:3})}}function an(t){let e,n;return{c(){e=L("img"),H(e.src,n=t[0].image||t[0])||d(e,"src",n),d(e,"alt",""),d(e,"class","svelte-rlgzoo"),U(e,"webcam",t[5]==="webcam"&&t[9])},m(r,s){y(r,e,s)},p(r,s){s[0]&1&&!H(e.src,n=r[0].image||r[0])&&d(e,"src",n),s[0]&544&&U(e,"webcam",r[5]==="webcam"&&r[9])},i:F,o:F,d(r){r&&v(e)}}}function fn(t){let e=t[20],n,r,s,u=at(t),i=t[15]>0&&ft(t);return{c(){u.c(),n=R(),i&&i.c(),r=ae()},m(o,l){u.m(o,l),y(o,n,l),i&&i.m(o,l),y(o,r,l),s=!0},p(o,l){l[0]&1048576&&G(e,e=o[20])?(u.d(1),u=at(o),u.c(),u.m(n.parentNode,n)):u.p(o,l),o[15]>0?i?(i.p(o,l),l[0]&32768&&w(i,1)):(i=ft(o),i.c(),w(i,1),i.m(r.parentNode,r)):i&&(Z(),A(i,1,1,()=>{i=null}),K())},i(o){s||(w(i),s=!0)},o(o){A(i),s=!1},d(o){u.d(o),o&&v(n),i&&i.d(o),o&&v(r)}}}function _n(t){let e,n,r,s,u;return e=new qe({props:{editable:!0}}),e.$on("edit",t[49]),e.$on("clear",t[23]),{c(){T(e.$$.fragment),n=R(),r=L("img"),H(r.src,s=t[0])||d(r,"src",s),d(r,"alt",""),d(r,"class","svelte-rlgzoo"),U(r,"webcam",t[5]==="webcam"&&t[9])},m(i,o){B(e,i,o),y(i,n,o),y(i,r,o),u=!0},p(i,o){(!u||o[0]&1&&!H(r.src,s=i[0]))&&d(r,"src",s),o[0]&544&&U(r,"webcam",i[5]==="webcam"&&i[9])},i(i){u||(w(e.$$.fragment,i),u=!0)},o(i){A(e.$$.fragment,i),u=!1},d(i){j(e,i),i&&v(n),i&&v(r)}}}function hn(t){let e,n,r,s,u={image:t[0]};return e=new At({props:u}),t[47](e),e.$on("crop",t[24]),r=new qe({}),r.$on("clear",t[48]),{c(){T(e.$$.fragment),n=R(),T(r.$$.fragment)},m(i,o){B(e,i,o),y(i,n,o),B(r,i,o),s=!0},p(i,o){const l={};o[0]&1&&(l.image=i[0]),e.$set(l)},i(i){s||(w(e.$$.fragment,i),w(r.$$.fragment,i),s=!0)},o(i){A(e.$$.fragment,i),A(r.$$.fragment,i),s=!1},d(i){t[47](null),j(e,i),i&&v(n),j(r,i)}}}function cn(t){let e,n,r=t[5]==="webcam"&&!t[20]&&ht(t);return{c(){r&&r.c(),e=ae()},m(s,u){r&&r.m(s,u),y(s,e,u),n=!0},p(s,u){s[5]==="webcam"&&!s[20]?r?(r.p(s,u),u[0]&1048608&&w(r,1)):(r=ht(s),r.c(),w(r,1),r.m(e.parentNode,e)):r&&(Z(),A(r,1,1,()=>{r=null}),K())},i(s){n||(w(r),n=!0)},o(s){A(r),n=!1},d(s){r&&r.d(s),s&&v(e)}}}function mn(t){let e,n,r,s,u,i,o;e=new Ge({}),e.$on("undo",t[39]),e.$on("clear",t[26]);let l=t[1]==="color-sketch"&&ct(t);function h(a){t[42](a)}function f(a){t[43](a)}let g={value:t[0],mode:t[12],width:t[15]||t[19],height:t[14]||t[18],container_height:t[16]||t[18],shape:t[6]};return t[2]!==void 0&&(g.brush_radius=t[2]),t[21]!==void 0&&(g.brush_color=t[21]),s=new Qe({props:g}),D.push(()=>X(s,"brush_radius",h)),D.push(()=>X(s,"brush_color",f)),t[44](s),s.$on("change",t[24]),s.$on("clear",t[26]),{c(){T(e.$$.fragment),n=R(),l&&l.c(),r=R(),T(s.$$.fragment)},m(a,_){B(e,a,_),y(a,n,_),l&&l.m(a,_),y(a,r,_),B(s,a,_),o=!0},p(a,_){a[1]==="color-sketch"?l?(l.p(a,_),_[0]&2&&w(l,1)):(l=ct(a),l.c(),w(l,1),l.m(r.parentNode,r)):l&&(Z(),A(l,1,1,()=>{l=null}),K());const b={};_[0]&1&&(b.value=a[0]),_[0]&4096&&(b.mode=a[12]),_[0]&557056&&(b.width=a[15]||a[19]),_[0]&278528&&(b.height=a[14]||a[18]),_[0]&327680&&(b.container_height=a[16]||a[18]),_[0]&64&&(b.shape=a[6]),!u&&_[0]&4&&(u=!0,b.brush_radius=a[2],V(()=>u=!1)),!i&&_[0]&2097152&&(i=!0,b.brush_color=a[21],V(()=>i=!1)),s.$set(b)},i(a){o||(w(e.$$.fragment,a),w(l),w(s.$$.fragment,a),o=!0)},o(a){A(e.$$.fragment,a),A(l),A(s.$$.fragment,a),o=!1},d(a){j(e,a),a&&v(n),l&&l.d(a),a&&v(r),t[44](null),j(s,a)}}}function gn(t){let e,n,r;function s(i){t[38](i)}let u={filetype:"image/*",include_file_metadata:!1,disable_click:!!t[0],$$slots:{default:[An]},$$scope:{ctx:t}};return t[11]!==void 0&&(u.dragging=t[11]),e=new Ht({props:u}),D.push(()=>X(e,"dragging",s)),e.$on("load",t[22]),{c(){T(e.$$.fragment)},m(i,o){B(e,i,o),r=!0},p(i,o){const l={};o[0]&1&&(l.disable_click=!!i[0]),o[0]&4191975|o[1]&134217728&&(l.$$scope={dirty:o,ctx:i}),!n&&o[0]&2048&&(n=!0,l.dragging=i[11],V(()=>n=!1)),e.$set(l)},i(i){r||(w(e.$$.fragment,i),r=!0)},o(i){A(e.$$.fragment,i),r=!1},d(i){j(e,i)}}}function at(t){let e,n,r,s;return{c(){e=L("img"),d(e,"class","absolute-img svelte-rlgzoo"),H(e.src,n=t[20]||t[0]?.image||t[0])||d(e,"src",n),d(e,"alt",""),U(e,"webcam",t[5]==="webcam"&&t[9])},m(u,i){y(u,e,i),t[50](e),r||(s=J(e,"load",t[25]),r=!0)},p(u,i){i[0]&1048577&&!H(e.src,n=u[20]||u[0]?.image||u[0])&&d(e,"src",n),i[0]&544&&U(e,"webcam",u[5]==="webcam"&&u[9])},d(u){u&&v(e),t[50](null),r=!1,s()}}}function ft(t){let e,n,r,s,u,i,o,l;function h(_){t[52](_)}function f(_){t[53](_)}let g={value:t[0],mode:t[12],width:t[15]||t[19],height:t[14]||t[18],container_height:t[16]||t[18],value_img:t[17],source:t[5]};t[2]!==void 0&&(g.brush_radius=t[2]),t[21]!==void 0&&(g.brush_color=t[21]),e=new Qe({props:g}),t[51](e),D.push(()=>X(e,"brush_radius",h)),D.push(()=>X(e,"brush_color",f)),e.$on("change",t[24]),u=new Ge({}),u.$on("undo",t[54]),u.$on("clear",t[26]);let a=(t[1]==="color-sketch"||t[1]==="sketch")&&_t(t);return{c(){T(e.$$.fragment),s=R(),T(u.$$.fragment),i=R(),a&&a.c(),o=ae()},m(_,b){B(e,_,b),y(_,s,b),B(u,_,b),y(_,i,b),a&&a.m(_,b),y(_,o,b),l=!0},p(_,b){const I={};b[0]&1&&(I.value=_[0]),b[0]&4096&&(I.mode=_[12]),b[0]&557056&&(I.width=_[15]||_[19]),b[0]&278528&&(I.height=_[14]||_[18]),b[0]&327680&&(I.container_height=_[16]||_[18]),b[0]&131072&&(I.value_img=_[17]),b[0]&32&&(I.source=_[5]),!n&&b[0]&4&&(n=!0,I.brush_radius=_[2],V(()=>n=!1)),!r&&b[0]&2097152&&(r=!0,I.brush_color=_[21],V(()=>r=!1)),e.$set(I),_[1]==="color-sketch"||_[1]==="sketch"?a?(a.p(_,b),b[0]&2&&w(a,1)):(a=_t(_),a.c(),w(a,1),a.m(o.parentNode,o)):a&&(Z(),A(a,1,1,()=>{a=null}),K())},i(_){l||(w(e.$$.fragment,_),w(u.$$.fragment,_),w(a),l=!0)},o(_){A(e.$$.fragment,_),A(u.$$.fragment,_),A(a),l=!1},d(_){t[51](null),j(e,_),_&&v(s),j(u,_),_&&v(i),a&&a.d(_),_&&v(o)}}}function _t(t){let e,n,r,s;function u(l){t[55](l)}function i(l){t[56](l)}let o={container_height:t[16]||t[18],img_width:t[15]||t[19],img_height:t[14]||t[18],mode:t[12]};return t[2]!==void 0&&(o.brush_radius=t[2]),t[21]!==void 0&&(o.brush_color=t[21]),e=new Ze({props:o}),D.push(()=>X(e,"brush_radius",u)),D.push(()=>X(e,"brush_color",i)),{c(){T(e.$$.fragment)},m(l,h){B(e,l,h),s=!0},p(l,h){const f={};h[0]&327680&&(f.container_height=l[16]||l[18]),h[0]&557056&&(f.img_width=l[15]||l[19]),h[0]&278528&&(f.img_height=l[14]||l[18]),h[0]&4096&&(f.mode=l[12]),!n&&h[0]&4&&(n=!0,f.brush_radius=l[2],V(()=>n=!1)),!r&&h[0]&2097152&&(r=!0,f.brush_color=l[21],V(()=>r=!1)),e.$set(f)},i(l){s||(w(e.$$.fragment,l),s=!0)},o(l){A(e.$$.fragment,l),s=!1},d(l){j(e,l)}}}function ht(t){let e,n;return e=new Wt({props:{streaming:t[7],pending:t[8],mirror_webcam:t[9]}}),e.$on("capture",t[45]),e.$on("stream",t[24]),e.$on("error",t[46]),{c(){T(e.$$.fragment)},m(r,s){B(e,r,s),n=!0},p(r,s){const u={};s[0]&128&&(u.streaming=r[7]),s[0]&256&&(u.pending=r[8]),s[0]&512&&(u.mirror_webcam=r[9]),e.$set(u)},i(r){n||(w(e.$$.fragment,r),n=!0)},o(r){A(e.$$.fragment,r),n=!1},d(r){j(e,r)}}}function ct(t){let e,n,r,s;function u(l){t[40](l)}function i(l){t[41](l)}let o={container_height:t[16]||t[18],img_width:t[15]||t[19],img_height:t[14]||t[18]};return t[2]!==void 0&&(o.brush_radius=t[2]),t[21]!==void 0&&(o.brush_color=t[21]),e=new Ze({props:o}),D.push(()=>X(e,"brush_radius",u)),D.push(()=>X(e,"brush_color",i)),{c(){T(e.$$.fragment)},m(l,h){B(e,l,h),s=!0},p(l,h){const f={};h[0]&327680&&(f.container_height=l[16]||l[18]),h[0]&557056&&(f.img_width=l[15]||l[19]),h[0]&278528&&(f.img_height=l[14]||l[18]),!n&&h[0]&4&&(n=!0,f.brush_radius=l[2],V(()=>n=!1)),!r&&h[0]&2097152&&(r=!0,f.brush_color=l[21],V(()=>r=!1)),e.$set(f)},i(l){s||(w(e.$$.fragment,l),s=!0)},o(l){A(e.$$.fragment,l),s=!1},d(l){j(e,l)}}}function dn(t){let e,n;return{c(){e=L("img"),H(e.src,n=t[0].image||t[0])||d(e,"src",n),d(e,"alt","hello"),d(e,"class","svelte-rlgzoo"),U(e,"webcam",t[5]==="webcam"&&t[9])},m(r,s){y(r,e,s)},p(r,s){s[0]&1&&!H(e.src,n=r[0].image||r[0])&&d(e,"src",n),s[0]&544&&U(e,"webcam",r[5]==="webcam"&&r[9])},i:F,o:F,d(r){r&&v(e)}}}function bn(t){let e=t[20],n,r,s,u=mt(t),i=t[15]>0&&gt(t);return{c(){u.c(),n=R(),i&&i.c(),r=ae()},m(o,l){u.m(o,l),y(o,n,l),i&&i.m(o,l),y(o,r,l),s=!0},p(o,l){l[0]&1048576&&G(e,e=o[20])?(u.d(1),u=mt(o),u.c(),u.m(n.parentNode,n)):u.p(o,l),o[15]>0?i?(i.p(o,l),l[0]&32768&&w(i,1)):(i=gt(o),i.c(),w(i,1),i.m(r.parentNode,r)):i&&(Z(),A(i,1,1,()=>{i=null}),K())},i(o){s||(w(i),s=!0)},o(o){A(i),s=!1},d(o){u.d(o),o&&v(n),i&&i.d(o),o&&v(r)}}}function pn(t){let e,n,r,s,u;return e=new qe({props:{editable:!0}}),e.$on("edit",t[30]),e.$on("clear",t[23]),{c(){T(e.$$.fragment),n=R(),r=L("img"),H(r.src,s=t[0])||d(r,"src",s),d(r,"alt",""),d(r,"class","svelte-rlgzoo"),U(r,"scale-x-[-1]",t[5]==="webcam"&&t[9])},m(i,o){B(e,i,o),y(i,n,o),y(i,r,o),u=!0},p(i,o){(!u||o[0]&1&&!H(r.src,s=i[0]))&&d(r,"src",s),o[0]&544&&U(r,"scale-x-[-1]",i[5]==="webcam"&&i[9])},i(i){u||(w(e.$$.fragment,i),u=!0)},o(i){A(e.$$.fragment,i),u=!1},d(i){j(e,i),i&&v(n),i&&v(r)}}}function kn(t){let e,n,r,s,u={image:t[0]};return e=new At({props:u}),t[28](e),e.$on("crop",t[24]),r=new qe({}),r.$on("clear",t[29]),{c(){T(e.$$.fragment),n=R(),T(r.$$.fragment)},m(i,o){B(e,i,o),y(i,n,o),B(r,i,o),s=!0},p(i,o){const l={};o[0]&1&&(l.image=i[0]),e.$set(l)},i(i){s||(w(e.$$.fragment,i),w(r.$$.fragment,i),s=!0)},o(i){A(e.$$.fragment,i),A(r.$$.fragment,i),s=!1},d(i){t[28](null),j(e,i),i&&v(n),j(r,i)}}}function wn(t){let e;const n=t[27].default,r=Tt(n,t,t[58],null);return{c(){r&&r.c()},m(s,u){r&&r.m(s,u),e=!0},p(s,u){r&&r.p&&(!e||u[1]&134217728)&&Bt(r,n,s,s[58],e?St(n,s[58],u,null):jt(s[58]),null)},i(s){e||(w(r,s),e=!0)},o(s){A(r,s),e=!1},d(s){r&&r.d(s)}}}function mt(t){let e,n,r,s;return{c(){e=L("img"),d(e,"class","absolute-img svelte-rlgzoo"),H(e.src,n=t[20]||t[0]?.image||t[0])||d(e,"src",n),d(e,"alt",""),U(e,"webcam",t[5]==="webcam"&&t[9])},m(u,i){y(u,e,i),t[31](e),r||(s=J(e,"load",t[25]),r=!0)},p(u,i){i[0]&1048577&&!H(e.src,n=u[20]||u[0]?.image||u[0])&&d(e,"src",n),i[0]&544&&U(e,"webcam",u[5]==="webcam"&&u[9])},d(u){u&&v(e),t[31](null),r=!1,s()}}}function gt(t){let e,n,r,s,u,i,o,l;function h(_){t[33](_)}function f(_){t[34](_)}let g={value:t[0],mode:t[12],width:t[15]||t[19],height:t[14]||t[18],container_height:t[16]||t[18],value_img:t[17],source:t[5],shape:t[6]};t[2]!==void 0&&(g.brush_radius=t[2]),t[21]!==void 0&&(g.brush_color=t[21]),e=new Qe({props:g}),t[32](e),D.push(()=>X(e,"brush_radius",h)),D.push(()=>X(e,"brush_color",f)),e.$on("change",t[24]),u=new Ge({}),u.$on("undo",t[35]),u.$on("clear",t[26]);let a=(t[1]==="color-sketch"||t[1]==="sketch")&&dt(t);return{c(){T(e.$$.fragment),s=R(),T(u.$$.fragment),i=R(),a&&a.c(),o=ae()},m(_,b){B(e,_,b),y(_,s,b),B(u,_,b),y(_,i,b),a&&a.m(_,b),y(_,o,b),l=!0},p(_,b){const I={};b[0]&1&&(I.value=_[0]),b[0]&4096&&(I.mode=_[12]),b[0]&557056&&(I.width=_[15]||_[19]),b[0]&278528&&(I.height=_[14]||_[18]),b[0]&327680&&(I.container_height=_[16]||_[18]),b[0]&131072&&(I.value_img=_[17]),b[0]&32&&(I.source=_[5]),b[0]&64&&(I.shape=_[6]),!n&&b[0]&4&&(n=!0,I.brush_radius=_[2],V(()=>n=!1)),!r&&b[0]&2097152&&(r=!0,I.brush_color=_[21],V(()=>r=!1)),e.$set(I),_[1]==="color-sketch"||_[1]==="sketch"?a?(a.p(_,b),b[0]&2&&w(a,1)):(a=dt(_),a.c(),w(a,1),a.m(o.parentNode,o)):a&&(Z(),A(a,1,1,()=>{a=null}),K())},i(_){l||(w(e.$$.fragment,_),w(u.$$.fragment,_),w(a),l=!0)},o(_){A(e.$$.fragment,_),A(u.$$.fragment,_),A(a),l=!1},d(_){t[32](null),j(e,_),_&&v(s),j(u,_),_&&v(i),a&&a.d(_),_&&v(o)}}}function dt(t){let e,n,r,s;function u(l){t[36](l)}function i(l){t[37](l)}let o={container_height:t[16]||t[18],img_width:t[15]||t[19],img_height:t[14]||t[18],mode:t[12]};return t[2]!==void 0&&(o.brush_radius=t[2]),t[21]!==void 0&&(o.brush_color=t[21]),e=new Ze({props:o}),D.push(()=>X(e,"brush_radius",u)),D.push(()=>X(e,"brush_color",i)),{c(){T(e.$$.fragment)},m(l,h){B(e,l,h),s=!0},p(l,h){const f={};h[0]&327680&&(f.container_height=l[16]||l[18]),h[0]&557056&&(f.img_width=l[15]||l[19]),h[0]&278528&&(f.img_height=l[14]||l[18]),h[0]&4096&&(f.mode=l[12]),!n&&h[0]&4&&(n=!0,f.brush_radius=l[2],V(()=>n=!1)),!r&&h[0]&2097152&&(r=!0,f.brush_color=l[21],V(()=>r=!1)),e.$set(f)},i(l){s||(w(e.$$.fragment,l),s=!0)},o(l){A(e.$$.fragment,l),s=!1},d(l){j(e,l)}}}function An(t){let e,n,r,s;const u=[wn,kn,pn,bn,dn],i=[];function o(l,h){return l[0]===null&&!l[20]||l[7]?0:l[1]==="select"?1:l[1]==="editor"?2:(l[1]==="sketch"||l[1]==="color-sketch")&&(l[0]!==null||l[20])?3:4}return e=o(t),n=i[e]=u[e](t),{c(){n.c(),r=ae()},m(l,h){i[e].m(l,h),y(l,r,h),s=!0},p(l,h){let f=e;e=o(l),e===f?i[e].p(l,h):(Z(),A(i[f],1,1,()=>{i[f]=null}),K(),n=i[e],n?n.p(l,h):(n=i[e]=u[e](l),n.c()),w(n,1),n.m(r.parentNode,r))},i(l){s||(w(n),s=!0)},o(l){A(n),s=!1},d(l){i[e].d(l),l&&v(r)}}}function In(t){let e,n,r,s,u,i,o;e=new wt({props:{show_label:t[4],Icon:t[5]==="canvas"?xe:Ue,label:t[3]||(t[5]==="canvas"?"Sketch":"Image")}});const l=[gn,mn,cn,hn,_n,fn,an],h=[];function f(g,a){return g[5]==="upload"?0:g[5]==="canvas"?1:g[0]===null&&!g[20]||g[7]?2:g[1]==="select"?3:g[1]==="editor"?4:(g[1]==="sketch"||g[1]==="color-sketch")&&(g[0]!==null||g[20])?5:6}return s=f(t),u=h[s]=l[s](t),{c(){T(e.$$.fragment),n=R(),r=L("div"),u.c(),d(r,"data-testid","image"),d(r,"class","svelte-rlgzoo"),Xe(()=>t[57].call(r)),U(r,"fixed-height",t[5]!=="webcam"||t[1]==="sketch"||t[1]==="color-sketch")},m(g,a){B(e,g,a),y(g,n,a),y(g,r,a),h[s].m(r,null),i=pt(r,t[57].bind(r)),o=!0},p(g,a){const _={};a[0]&16&&(_.show_label=g[4]),a[0]&32&&(_.Icon=g[5]==="canvas"?xe:Ue),a[0]&40&&(_.label=g[3]||(g[5]==="canvas"?"Sketch":"Image")),e.$set(_);let b=s;s=f(g),s===b?h[s].p(g,a):(Z(),A(h[b],1,1,()=>{h[b]=null}),K(),u=h[s],u?u.p(g,a):(u=h[s]=l[s](g),u.c()),w(u,1),u.m(r,null)),a[0]&34&&U(r,"fixed-height",g[5]!=="webcam"||g[1]==="sketch"||g[1]==="color-sketch")},i(g){o||(w(e.$$.fragment,g),w(u),o=!0)},o(g){A(e.$$.fragment,g),A(u),o=!1},d(g){j(e,g),g&&v(n),g&&v(r),h[s].d(),i()}}}function Cn(t,e,n){let r,{$$slots:s={},$$scope:u}=e,{value:i}=e,{label:o=void 0}=e,{show_label:l}=e,{source:h="upload"}=e,{tool:f="editor"}=e,{shape:g}=e,{streaming:a=!1}=e,{pending:_=!1}=e,{mirror_webcam:b}=e,{brush_radius:I}=e,z,q;i&&(h==="upload"||h==="webcam")&&f==="sketch"&&(i={image:i,mask:null});function ie({detail:c}){f==="color-sketch"?n(20,$=c):n(0,i=(h==="upload"||h==="webcam")&&f==="sketch"?{image:c,mask:null}:c),p("upload",c)}function se({detail:c}){n(0,i=null),n(20,$=void 0),p("clear")}async function S({detail:c},M){k==="mask"?h==="webcam"&&M?n(0,i={image:c,mask:null}):n(0,i={image:typeof i=="string"?i:i?.image||null,mask:c}):(h==="upload"||h==="webcam")&&f==="sketch"?n(0,i={image:c,mask:null}):n(0,i=c),await ge(),p(a?"stream":"edit")}const p=me();let N=!1;function W(c){const M=c.currentTarget;n(15,ne=M.naturalWidth),n(14,te=M.naturalHeight),n(16,re=M.getBoundingClientRect().height)}async function le(){z.clear(),await ge(),n(0,i=null),n(20,$=void 0)}let te=0,ne=0,re=0,k,P,fe,ue,$;kt(async()=>{f==="color-sketch"&&i&&typeof i=="string"&&(n(20,$=i),await ge(),W({currentTarget:P}))});function we(c){D[c?"unshift":"push"](()=>{q=c,n(10,q),n(0,i)})}const Ne=c=>(se(c),n(1,f="editor")),de=()=>n(1,f="select");function Fe(c){D[c?"unshift":"push"](()=>{P=c,n(17,P)})}function Ae(c){D[c?"unshift":"push"](()=>{z=c,n(13,z)})}function We(c){I=c,n(2,I)}function Ie(c){r=c,n(21,r),n(12,k),n(5,h),n(1,f)}const Ce=()=>z.undo();function ye(c){I=c,n(2,I)}function ve(c){r=c,n(21,r),n(12,k),n(5,h),n(1,f)}function ze(c){N=c,n(11,N)}const _e=()=>z.undo();function Me(c){I=c,n(2,I)}function Te(c){r=c,n(21,r),n(12,k),n(5,h),n(1,f)}function Be(c){I=c,n(2,I)}function je(c){r=c,n(21,r),n(12,k),n(5,h),n(1,f)}function Se(c){D[c?"unshift":"push"](()=>{z=c,n(13,z)})}const De=c=>f==="color-sketch"?ie(c):S(c,!0);function oe(c){ce.call(this,t,c)}function he(c){D[c?"unshift":"push"](()=>{q=c,n(10,q),n(0,i)})}const Ee=c=>(se(c),n(1,f="editor")),be=()=>n(1,f="select");function Oe(c){D[c?"unshift":"push"](()=>{P=c,n(17,P)})}function Re(c){D[c?"unshift":"push"](()=>{z=c,n(13,z)})}function He(c){I=c,n(2,I)}function Ye(c){r=c,n(21,r),n(12,k),n(5,h),n(1,f)}const Je=()=>z.undo();function Pe(c){I=c,n(2,I)}function m(c){r=c,n(21,r),n(12,k),n(5,h),n(1,f)}function C(){fe=this.offsetHeight,ue=this.offsetWidth,n(18,fe),n(19,ue)}return t.$$set=c=>{"value"in c&&n(0,i=c.value),"label"in c&&n(3,o=c.label),"show_label"in c&&n(4,l=c.show_label),"source"in c&&n(5,h=c.source),"tool"in c&&n(1,f=c.tool),"shape"in c&&n(6,g=c.shape),"streaming"in c&&n(7,a=c.streaming),"pending"in c&&n(8,_=c.pending),"mirror_webcam"in c&&n(9,b=c.mirror_webcam),"brush_radius"in c&&n(2,I=c.brush_radius),"$$scope"in c&&n(58,u=c.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&1&&p("change",i),t.$$.dirty[0]&2048&&p("drag",N),t.$$.dirty[0]&34&&(h==="canvas"&&f==="sketch"?n(12,k="bw-sketch"):f==="color-sketch"?n(12,k="color-sketch"):(h==="upload"||h==="webcam")&&f==="sketch"?n(12,k="mask"):n(12,k="editor")),t.$$.dirty[0]&4096&&n(21,r=k=="mask"?"#000000":"#000"),t.$$.dirty[0]&1&&(i===null||i.image===null&&i.mask===null)&&n(20,$=void 0),t.$$.dirty[0]&1025&&q&&(i?(n(10,q.image=i,q),q.create()):q.destroy())},[i,f,I,o,l,h,g,a,_,b,q,N,k,z,te,ne,re,P,fe,ue,$,r,ie,se,S,W,le,s,we,Ne,de,Fe,Ae,We,Ie,Ce,ye,ve,ze,_e,Me,Te,Be,je,Se,De,oe,he,Ee,be,Oe,Re,He,Ye,Je,Pe,m,C,u]}class yn extends x{constructor(e){super(),ee(this,e,Cn,In,G,{value:0,label:3,show_label:4,source:5,tool:1,shape:6,streaming:7,pending:8,mirror_webcam:9,brush_radius:2},null,[-1,-1])}}function vn(t){let e,n,r,s,u,i,o;return r=new ke({props:{Icon:Jt,label:"Download"}}),{c(){e=L("div"),n=L("a"),T(r.$$.fragment),s=R(),u=L("img"),d(n,"href",t[0]),d(n,"target",window.__is_colab__?"_blank":null),d(n,"download","image"),d(e,"class","download svelte-kt1jzh"),H(u.src,i=t[0])||d(u,"src",i),d(u,"alt",""),d(u,"class","svelte-kt1jzh")},m(l,h){y(l,e,h),O(e,n),B(r,n,null),y(l,s,h),y(l,u,h),o=!0},p(l,h){(!o||h&1)&&d(n,"href",l[0]),(!o||h&1&&!H(u.src,i=l[0]))&&d(u,"src",i)},i(l){o||(w(r.$$.fragment,l),o=!0)},o(l){A(r.$$.fragment,l),o=!1},d(l){l&&v(e),j(r),l&&v(s),l&&v(u)}}}function zn(t){let e,n;return e=new Yt({props:{size:"large",unpadded_box:!0,$$slots:{default:[Mn]},$$scope:{ctx:t}}}),{c(){T(e.$$.fragment)},m(r,s){B(e,r,s),n=!0},p(r,s){const u={};s&16&&(u.$$scope={dirty:s,ctx:r}),e.$set(u)},i(r){n||(w(e.$$.fragment,r),n=!0)},o(r){A(e.$$.fragment,r),n=!1},d(r){j(e,r)}}}function Mn(t){let e,n;return e=new Ue({}),{c(){T(e.$$.fragment)},m(r,s){B(e,r,s),n=!0},i(r){n||(w(e.$$.fragment,r),n=!0)},o(r){A(e.$$.fragment,r),n=!1},d(r){j(e,r)}}}function Tn(t){let e,n,r,s,u,i;e=new wt({props:{show_label:t[2],Icon:Ue,label:t[1]||"Image"}});const o=[zn,vn],l=[];function h(f,g){return f[0]===null?0:1}return r=h(t),s=l[r]=o[r](t),{c(){T(e.$$.fragment),n=R(),s.c(),u=ae()},m(f,g){B(e,f,g),y(f,n,g),l[r].m(f,g),y(f,u,g),i=!0},p(f,[g]){const a={};g&4&&(a.show_label=f[2]),g&2&&(a.label=f[1]||"Image"),e.$set(a);let _=r;r=h(f),r===_?l[r].p(f,g):(Z(),A(l[_],1,1,()=>{l[_]=null}),K(),s=l[r],s?s.p(f,g):(s=l[r]=o[r](f),s.c()),w(s,1),s.m(u.parentNode,u))},i(f){i||(w(e.$$.fragment,f),w(s),i=!0)},o(f){A(e.$$.fragment,f),A(s),i=!1},d(f){j(e,f),f&&v(n),l[r].d(f),f&&v(u)}}}function Bn(t,e,n){let{value:r}=e,{label:s=void 0}=e,{show_label:u}=e;const i=me();return t.$$set=o=>{"value"in o&&n(0,r=o.value),"label"in o&&n(1,s=o.label),"show_label"in o&&n(2,u=o.show_label)},t.$$.update=()=>{t.$$.dirty&1&&r&&i("change",r)},[r,s,u]}class jn extends x{constructor(e){super(),ee(this,e,Bn,Tn,G,{value:0,label:1,show_label:2})}}function Sn(t){let e,n,r;function s(i){t[16](i)}let u={brush_radius:t[13],shape:t[12],source:t[4],tool:t[5],label:t[6],show_label:t[7],pending:t[9],streaming:t[8],mirror_webcam:t[11],$$slots:{default:[En]},$$scope:{ctx:t}};return t[0]!==void 0&&(u.value=t[0]),e=new yn({props:u}),D.push(()=>X(e,"value",s)),e.$on("edit",t[17]),e.$on("clear",t[18]),e.$on("change",t[19]),e.$on("stream",t[20]),e.$on("drag",t[21]),e.$on("upload",t[22]),e.$on("error",t[23]),{c(){T(e.$$.fragment)},m(i,o){B(e,i,o),r=!0},p(i,o){const l={};o&8192&&(l.brush_radius=i[13]),o&4096&&(l.shape=i[12]),o&16&&(l.source=i[4]),o&32&&(l.tool=i[5]),o&64&&(l.label=i[6]),o&128&&(l.show_label=i[7]),o&512&&(l.pending=i[9]),o&256&&(l.streaming=i[8]),o&2048&&(l.mirror_webcam=i[11]),o&33554432&&(l.$$scope={dirty:o,ctx:i}),!n&&o&1&&(n=!0,l.value=i[0],V(()=>n=!1)),e.$set(l)},i(i){r||(w(e.$$.fragment,i),r=!0)},o(i){A(e.$$.fragment,i),r=!1},d(i){j(e,i)}}}function Dn(t){let e,n;return e=new jn({props:{value:t[0],label:t[6],show_label:t[7]}}),{c(){T(e.$$.fragment)},m(r,s){B(e,r,s),n=!0},p(r,s){const u={};s&1&&(u.value=r[0]),s&64&&(u.label=r[6]),s&128&&(u.show_label=r[7]),e.$set(u)},i(r){n||(w(e.$$.fragment,r),n=!0)},o(r){A(e.$$.fragment,r),n=!1},d(r){j(e,r)}}}function En(t){let e,n;return e=new Pt({props:{type:"image"}}),{c(){T(e.$$.fragment)},m(r,s){B(e,r,s),n=!0},p:F,i(r){n||(w(e.$$.fragment,r),n=!0)},o(r){A(e.$$.fragment,r),n=!1},d(r){j(e,r)}}}function Rn(t){let e,n,r,s,u,i;const o=[t[1]];let l={};for(let a=0;a<o.length;a+=1)l=Dt(l,o[a]);e=new Et({props:l});const h=[Dn,Sn],f=[];function g(a,_){return a[14]==="static"?0:1}return r=g(t),s=f[r]=h[r](t),{c(){T(e.$$.fragment),n=R(),s.c(),u=ae()},m(a,_){B(e,a,_),y(a,n,_),f[r].m(a,_),y(a,u,_),i=!0},p(a,_){const b=_&2?Rt(o,[Lt(a[1])]):{};e.$set(b);let I=r;r=g(a),r===I?f[r].p(a,_):(Z(),A(f[I],1,1,()=>{f[I]=null}),K(),s=f[r],s?s.p(a,_):(s=f[r]=h[r](a),s.c()),w(s,1),s.m(u.parentNode,u))},i(a){i||(w(e.$$.fragment,a),w(s),i=!0)},o(a){A(e.$$.fragment,a),A(s),i=!1},d(a){j(e,a),a&&v(n),f[r].d(a),a&&v(u)}}}function Ln(t){let e,n;return e=new Ut({props:{visible:t[3],variant:t[14]==="dynamic"&&t[0]===null&&t[4]==="upload"?"dashed":"solid",border_mode:t[15]?"focus":"base",padding:!1,elem_id:t[2],style:{height:t[10].height,width:t[10].width},allow_overflow:!1,$$slots:{default:[Rn]},$$scope:{ctx:t}}}),{c(){T(e.$$.fragment)},m(r,s){B(e,r,s),n=!0},p(r,[s]){const u={};s&8&&(u.visible=r[3]),s&16401&&(u.variant=r[14]==="dynamic"&&r[0]===null&&r[4]==="upload"?"dashed":"solid"),s&32768&&(u.border_mode=r[15]?"focus":"base"),s&4&&(u.elem_id=r[2]),s&1024&&(u.style={height:r[10].height,width:r[10].width}),s&33618931&&(u.$$scope={dirty:s,ctx:r}),e.$set(u)},i(r){n||(w(e.$$.fragment,r),n=!0)},o(r){A(e.$$.fragment,r),n=!1},d(r){j(e,r)}}}function Un(t,e,n){let{elem_id:r=""}=e,{visible:s=!0}=e,{value:u=null}=e,{source:i="upload"}=e,{tool:o="editor"}=e,{label:l}=e,{show_label:h}=e,{streaming:f}=e,{pending:g}=e,{style:a={}}=e,{mirror_webcam:_}=e,{shape:b}=e,{brush_radius:I}=e,{loading_status:z}=e,{mode:q}=e;const ie=me();let se;function S(k){u=k,n(0,u)}function p(k){ce.call(this,t,k)}function N(k){ce.call(this,t,k)}function W(k){ce.call(this,t,k)}function le(k){ce.call(this,t,k)}const te=({detail:k})=>n(15,se=k);function ne(k){ce.call(this,t,k)}const re=({detail:k})=>{n(1,z=z||{}),n(1,z.status="error",z),n(1,z.message=k,z)};return t.$$set=k=>{"elem_id"in k&&n(2,r=k.elem_id),"visible"in k&&n(3,s=k.visible),"value"in k&&n(0,u=k.value),"source"in k&&n(4,i=k.source),"tool"in k&&n(5,o=k.tool),"label"in k&&n(6,l=k.label),"show_label"in k&&n(7,h=k.show_label),"streaming"in k&&n(8,f=k.streaming),"pending"in k&&n(9,g=k.pending),"style"in k&&n(10,a=k.style),"mirror_webcam"in k&&n(11,_=k.mirror_webcam),"shape"in k&&n(12,b=k.shape),"brush_radius"in k&&n(13,I=k.brush_radius),"loading_status"in k&&n(1,z=k.loading_status),"mode"in k&&n(14,q=k.mode)},t.$$.update=()=>{t.$$.dirty&1&&n(0,u=u||null),t.$$.dirty&1&&ie("change")},[u,z,r,s,i,o,l,h,f,g,a,_,b,I,q,se,S,p,N,W,le,te,ne,re]}class qn extends x{constructor(e){super(),ee(this,e,Un,Ln,G,{elem_id:2,visible:3,value:0,source:4,tool:5,label:6,show_label:7,streaming:8,pending:9,style:10,mirror_webcam:11,shape:12,brush_radius:13,loading_status:1,mode:14})}}var Kn=qn;const $n=["static","dynamic"],xn=t=>({type:{payload:"string"},description:{payload:"image data as base64 string"},example_data:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAACklEQVR4nGMAAQAABQABDQottAAAAABJRU5ErkJggg=="});export{Kn as Component,nr as ExampleComponent,xn as document,$n as modes};
//# sourceMappingURL=index.5ca0dfdb.js.map
